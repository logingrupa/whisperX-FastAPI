---
phase: 04-core-upload-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/src/lib/utils.ts
  - frontend/src/components/ui/button.tsx
  - frontend/src/components/ui/select.tsx
  - frontend/src/components/ui/badge.tsx
  - frontend/src/components/ui/card.tsx
  - frontend/src/components/ui/tooltip.tsx
  - frontend/src/components/ui/sonner.tsx
  - frontend/src/components/ui/scroll-area.tsx
  - frontend/components.json
autonomous: true

must_haves:
  truths:
    - "shadcn/ui components are installed and importable"
    - "react-dropzone is installed and importable"
    - "Sonner toast can display notifications"
  artifacts:
    - path: "frontend/components.json"
      provides: "shadcn/ui configuration"
      contains: "tailwindcss"
    - path: "frontend/src/lib/utils.ts"
      provides: "cn() class merge utility"
      exports: ["cn"]
    - path: "frontend/src/components/ui/button.tsx"
      provides: "Button component"
      exports: ["Button"]
    - path: "frontend/src/components/ui/select.tsx"
      provides: "Select components"
      exports: ["Select", "SelectTrigger", "SelectContent", "SelectItem"]
  key_links:
    - from: "frontend/src/lib/utils.ts"
      to: "clsx + tailwind-merge"
      via: "npm imports"
      pattern: "clsx.*tailwind-merge"
---

<objective>
Initialize shadcn/ui component library and install react-dropzone for file upload handling.

Purpose: Establishes the UI foundation for all upload flow components. shadcn/ui provides accessible, customizable components; react-dropzone handles browser file drag-and-drop quirks.
Output: Configured shadcn/ui with Button, Select, Badge, Card, Tooltip, Sonner, ScrollArea components; react-dropzone installed.
</objective>

<execution_context>
@C:\Users\rolan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\rolan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-core-upload-flow/04-RESEARCH.md
@frontend/package.json
@frontend/vite.config.ts
@frontend/tsconfig.app.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and initialize shadcn/ui</name>
  <files>
    frontend/package.json
    frontend/components.json
    frontend/src/lib/utils.ts
  </files>
  <action>
From the frontend/ directory:

1. Install react-dropzone:
   ```bash
   bun add react-dropzone
   ```

2. Initialize shadcn/ui with these settings (use non-interactive flags):
   ```bash
   bunx shadcn@latest init -y --base-color neutral --css-variables
   ```

   If prompted interactively, select:
   - Style: New York
   - Base color: Neutral
   - CSS variables: Yes

3. Verify components.json was created with correct paths:
   - Should have `"aliases": { "components": "@/components", "utils": "@/lib/utils" }`
   - Should reference Tailwind CSS

4. Verify src/lib/utils.ts exists with cn() function using clsx and tailwind-merge.

Note: shadcn/ui init will install clsx, tailwind-merge, class-variance-authority, and lucide-react automatically.
  </action>
  <verify>
    - `cat frontend/components.json` shows valid config
    - `cat frontend/src/lib/utils.ts` shows cn() function export
    - `bun pm ls | grep react-dropzone` shows installed
    - `bun pm ls | grep clsx` shows installed
  </verify>
  <done>
    - components.json exists with correct aliases
    - src/lib/utils.ts exports cn() function
    - react-dropzone ^14.x installed
    - clsx, tailwind-merge, class-variance-authority installed
  </done>
</task>

<task type="auto">
  <name>Task 2: Add shadcn/ui components</name>
  <files>
    frontend/src/components/ui/button.tsx
    frontend/src/components/ui/select.tsx
    frontend/src/components/ui/badge.tsx
    frontend/src/components/ui/card.tsx
    frontend/src/components/ui/tooltip.tsx
    frontend/src/components/ui/sonner.tsx
    frontend/src/components/ui/scroll-area.tsx
  </files>
  <action>
From the frontend/ directory, add each component:

```bash
bunx shadcn@latest add button select badge card tooltip sonner scroll-area -y
```

This installs:
- Button: Primary action buttons with variants
- Select: Dropdown menus for language/model selection (based on Radix)
- Badge: Language detection indicator
- Card: File queue item container
- Tooltip: Hover hints for detected language explanation
- Sonner: Toast notifications for rejected files
- ScrollArea: Scrollable file queue list

All components will be placed in src/components/ui/ directory.
  </action>
  <verify>
    - `ls frontend/src/components/ui/` shows all 7 component files
    - `grep -l "export" frontend/src/components/ui/button.tsx` confirms exports exist
    - `grep -l "SelectContent" frontend/src/components/ui/select.tsx` confirms select parts
  </verify>
  <done>
    - All 7 component files exist in frontend/src/components/ui/
    - Each component has proper exports
    - Components use @/lib/utils for cn() function
  </done>
</task>

<task type="auto">
  <name>Task 3: Add TooltipProvider and Toaster to app root</name>
  <files>
    frontend/src/main.tsx
  </files>
  <action>
Update main.tsx to wrap the app with TooltipProvider (single instance at root for performance - see RESEARCH.md pitfall #4) and add Toaster component for notifications:

```typescript
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import { TooltipProvider } from '@/components/ui/tooltip'
import { Toaster } from '@/components/ui/sonner'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <TooltipProvider>
      <App />
      <Toaster />
    </TooltipProvider>
  </StrictMode>,
)
```

Why TooltipProvider at root: Research found wrapping each Tooltip individually causes performance issues. Single provider at root is the recommended pattern.

Why Toaster at root: Sonner needs a single Toaster component to render toast notifications. Must be sibling to App or inside the provider tree.
  </action>
  <verify>
    - `grep "TooltipProvider" frontend/src/main.tsx` shows import and usage
    - `grep "Toaster" frontend/src/main.tsx` shows import and usage
    - `cd frontend && bun run build` succeeds without errors
  </verify>
  <done>
    - main.tsx wraps App with TooltipProvider
    - Toaster component added as sibling to App
    - Build succeeds with no TypeScript errors
  </done>
</task>

</tasks>

<verification>
1. Run `cd frontend && bun run build` - should complete without errors
2. Run `cd frontend && bun run dev` - should start dev server
3. Visit http://localhost:5173/ui/ - should load without console errors
4. Verify shadcn/ui imports work: Create a temp test in App.tsx importing Button, confirm no errors
</verification>

<success_criteria>
- components.json exists with proper configuration
- All 7 shadcn/ui components exist in src/components/ui/
- react-dropzone installed
- TooltipProvider wraps app at root level
- Toaster component renders for notifications
- Frontend builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/04-core-upload-flow/04-01-SUMMARY.md`
</output>
